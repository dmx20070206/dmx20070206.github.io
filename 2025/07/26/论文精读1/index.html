<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  
  
    <meta name="description" content="SAGE:Software-based Attestation for GPU Execution">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <title>【论文精读】SAGE:Software-based Attestation for GPU Execution |  Hexo</title>
  
    <link rel="apple-touch-icon" sizes="57x57" href="/images/DMX_cat.jpg/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/DMX_cat.jpg/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/DMX_cat.jpg/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/DMX_cat.jpg/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/DMX_cat.jpg/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/DMX_cat.jpg/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/DMX_cat.jpg/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/DMX_cat.jpg/apple-touch-icon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/images/DMX_cat.jpg/apple-touch-icon-167x167.png">
  
  
    <link rel="shortcut icon" href="/images/DMX_cat.jpg">
  
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <main class="main">
    
	<header id="header" class="header">

	<div class="container">
		<nav class="navbar d-flex align-items-center">
			<a class="brand" href="/">
				<img class="logo lazyload" data-src="/images/DMX_cat.jpg" alt="Hexo" role="img">
			</a>
			<ul class="main-nav">
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/">首页</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/stories">故事</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/archives">博客</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/about">关于</a>
  </li>
  
</ul>
		</nav>
		<a id="mobile-nav-toggle">
			<span class="mobile-nav-toggle-bar"></span>
			<span class="mobile-nav-toggle-bar"></span>
			<span class="mobile-nav-toggle-bar"></span>
		</a>
	</div>
</header>

    <section>
      <div class="container">
  <article id="post-论文精读1" class="article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  
  <div class="article-cover mb-5">
    
  
    
      <img class="article-cover-img lazyload" data-src="/images/papers/1.png" itemprop="image">
    
  

  </div>
  
  <div class="article-inner">
    
    <header class="article-header">
      
      
  
    <h1 class="article-title" itemprop="name">
      【论文精读】SAGE:Software-based Attestation for GPU Execution
    </h1>
  

      <div class="article-meta">
        <time class="text-gray" datetime="2025-07-25T16:00:00.000Z" itemprop="datePublished">
  2025-07-26
</time>
        
      </div>
      
    </header>
    
    <div class="article-entry" itemprop="articleBody">
      <p>SAGE: Software-based Attestation for GPU Execution</p>
<blockquote>
<p>Ivanov A, Rothenberger B, Dethise A, et al. {SAGE}: Software-based attestation for {GPU} execution[C]&#x2F;&#x2F;2023 USENIX Annual Technical Conference (USENIX ATC 23). 2023: 485-499.</p>
</blockquote>
<span id="more"></span>

<hr>
<link rel="stylesheet" href="/css/GPU_TEE.css">

<h2 id="Abstarct"><a href="#Abstarct" class="headerlink" title="Abstarct"></a>Abstarct</h2><p>作者聚焦于 <code>purely software-based</code> 的 <code>GPU TEE</code> 工作，纯软件的 TEE 有三大好处：</p>
<ol>
<li>作为硬件 TEE 的补充，弥补其漏洞</li>
<li>不需要对 GPU 进行硬件上的修改</li>
<li>不需要额外在 GPU 上嵌入硬件密钥</li>
</ol>
<p>作者提出了 <code>SAGE</code> 的设计，<code>a software-based attestation mechanism for GPU execution</code>。保证在 A100 上安全执行代码，在 CPU 和 GPU 上可能存在恶意代码的前提下，保障 <code>code integrity and secrecy</code>, <code>computation integrity</code>, <code>data integrity and secrecy</code>。</p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p><code>公有云场景</code>下，越来越多的机密任务需要卸载到 GPU 上执行，亟需实现 <code>GPU TEE</code> 机制，但是 <code>硬件 GPU TEE</code>存在问题，硬件修改使得技术部署到广泛利用存在 lag time，且不利于各大厂商适配更优秀的后继产品。</p>
<p>解决这个问题的一大途径就是 <code>software-based GPU TEE</code>，作者通过调研发现，<code>software-based CPU TEE</code> 部分通过 <code>verification function &amp; checksum</code> 机制实现。认证方发送 <code>VF</code> 给 <code>untrusted platform</code>，要求 <code>a correct checksum value that is returned before a threshold point in time</code>。</p>
<p>作者发现，还没有研究在 GPU 上实现 <code>VF</code> 机制，可能是因为会面临额外的挑战：</p>
<ol>
<li>实现 <code>VF</code> 的原则：</li>
</ol>
<ul>
<li>code secrecy and integrity</li>
<li>data secrecy and integrity</li>
<li>in the presence of a malicious OS</li>
<li>malicious code on GPU</li>
<li>a malicious CPU-GPU interconnect</li>
</ul>
<ol start="2">
<li>实现 <code>VF</code> 的挑战：</li>
</ol>
<ul>
<li>GPU 没有 <code>RNG Generator</code></li>
<li>GPU 开发文档的匮乏</li>
<li>没有相关工具链支持编写 <code>native GPU microcode</code></li>
<li>很难对 GPU 执行进行优化</li>
</ul>
<p>作者在本文中实现了 <strong>SAGE</strong> 系统，支持在 A100 上建立 TEE。使用主机侧运行的 <code>Intel SGX enclave</code> 作为验证方，启动软件原语建立 <code>dynamic RoT</code>，并设立共享密钥用于建立安全会话通道。SAGE 的成功启动可以保证：用户内核未经修改地在 GPU 上执行，在执行过程中没有受到恶意地攻击。此外，作者还在 GPU 上实现了 <code>TRNG</code>。</p>
<h2 id="Problem-Definition"><a href="#Problem-Definition" class="headerlink" title="Problem Definition"></a>Problem Definition</h2><h3 id="Design-Goals-And-Assumptions"><a href="#Design-Goals-And-Assumptions" class="headerlink" title="Design Goals And Assumptions"></a>Design Goals And Assumptions</h3><p>设计目标：</p>
<ol>
<li><code>Verifiable code execution on the GPU</code>: 建立无害的代码执行环境，保证代码执行的完整性和机密性</li>
<li><code>Data integrity and confidentiality</code>: 数据的完整性和机密性</li>
<li><code>Dynamic root of trust without hardware support</code>: 动态的在 GPU 上建立 TCB</li>
</ol>
<p>场景假设：</p>
<ol>
<li>被验证的 GPU 和验证方在一台机器上</li>
<li>验证方了解 GPU 的硬件配置</li>
</ol>
<h3 id="Threat-Model"><a href="#Threat-Model" class="headerlink" title="Threat Model"></a>Threat Model</h3><ol>
<li>TCB</li>
</ol>
<ul>
<li>CPU, GPU 固件</li>
<li>Intel SGX TCB</li>
</ul>
<ol start="2">
<li>Attacker’s Capabilities</li>
</ol>
<ul>
<li>remote adversary</li>
<li>has full control over the software of the untrusted host system</li>
</ul>
<ol start="3">
<li>Out Of Scope</li>
</ol>
<ul>
<li>SGX 的攻击面</li>
<li>system availability attacks</li>
<li>未公开的攻击面</li>
</ul>
<h2 id="SAGE-Overview"><a href="#SAGE-Overview" class="headerlink" title="SAGE Overview"></a>SAGE Overview</h2><p><img src="/images/papers/1/F2.png" alt="alt text"></p>
<p>如上图，SAGE 包含两个主要部分：<code>Verifier</code> 和 <code>VF</code>。远程用户可以验证 <code>Verifier</code>，<code>Verifier</code> 向 GPU 发送 <code>VF</code> 。</p>
<p><img src="/images/papers/1/F3.png" alt="alt text"></p>
<p>如上图，<code>Verifier</code> 首先发送 <code>VF</code> 给 GPU，验证返回结果和计算时间。验证通过会设立共享安全密钥，之后只有密钥加密的指令才能在 GPU 上执行。</p>
<h2 id="Verification-Function-VF"><a href="#Verification-Function-VF" class="headerlink" title="Verification Function (VF)"></a>Verification Function (VF)</h2><p><code>VF</code> 的核心设计原则是，任何意料之外的干扰，都会导致可分辨的执行时间的延长和校验和的错误。</p>
<blockquote>
<p>if an attacker alters the verification function but wants to forge a correct checksum value, needs to do “more work”, causing a time overhead</p>
</blockquote>
<p><code>VF</code> 需要满足的特性：</p>
<ol>
<li><code>Time-optimal implementation</code>: 时间上最优，不存在相同的实现，能在更短的时间完成相同的功能。</li>
<li><code>Maximize resource usage during checksum computation</code>：如果存在其他恶意内核在 GPU 上执行，其占用 SM 资源会导致 <code>VF</code> 的 SM 寄存器数据被迫转到内存中，导致校验和错误。</li>
<li><code>Predictable execution time</code>: 执行时间可预测并且稳定，方便设置时间阈值。</li>
<li><code>Challenge-dependent checksums</code>: 支持挑战-响应协议，防止重放攻击。</li>
</ol>
<h3 id="Self-Verifying-Checksum-Function"><a href="#Self-Verifying-Checksum-Function" class="headerlink" title="Self-Verifying Checksum Function"></a>Self-Verifying Checksum Function</h3><p><code>VF code</code> 可以被划分为三个部分：<code>VF Init &amp; VF Checksum Function &amp; Checksum epilogue</code>:</p>
<ol>
<li><code>VF Init</code>:</li>
</ol>
<ul>
<li>根据外来 <code>Challenge</code>，给每个 thread 分配初始随机数</li>
<li>在每个 thread 上启动 <code>VF Checksum Function</code></li>
</ul>
<ol start="2">
<li><code>VF Checksum Function (per thread)</code>:</li>
</ol>
<ul>
<li>伪随机访问 <code>VF code</code></li>
<li>根据上条结果，更新 <code>Checksum</code></li>
<li>根据上条结果，动态更新 <code>VF code</code></li>
<li>循环</li>
</ul>
<ol start="3">
<li><code>Checksum epilogue</code></li>
</ol>
<ul>
<li><code>thread =&gt; warp =&gt; block =&gt; grip =&gt; checksum responce</code></li>
</ul>
<p><img src="/images/papers/1/O1.png" alt="alt text"></p>
<p><code>checksum</code> 可以作为整个 <code>VF code</code> 的指纹，而 <code>VF Checksum Function</code> 也是 <code>VF code</code> 的一部分，故称为 <code>Self-Verifying Checksum Function</code>。</p>
<p><code>checksum</code> 数值的验证：主机侧同步模拟。</p>
<p><code>checksum</code> 时间的验证：在时间阈值内，时间阈值的确定方式如下图：</p>
<p><img src="/images/papers/1/O2.png" alt="alt text"></p>
<h3 id="Untampered-Execution-Environment"><a href="#Untampered-Execution-Environment" class="headerlink" title="Untampered Execution Environment"></a>Untampered Execution Environment</h3><h2 id="Security-Analysis"><a href="#Security-Analysis" class="headerlink" title="Security Analysis"></a>Security Analysis</h2><ol>
<li><code>Pre-computation</code></li>
</ol>
<ul>
<li>攻击方式：攻击者提前计算 <code>checksum</code> 中间值，节省计算时间</li>
<li>防御：<code>checksum</code> 的值依赖于随机的挑战</li>
</ul>
<ol start="2">
<li><code>Computation optimizations</code></li>
</ol>
<ul>
<li>攻击方式：攻击者自行设计效率更高的 <code>VF&#39;</code>，节省计算时间</li>
<li>防御：SAGE 保证 <code>VF</code> 的效率是最高的</li>
</ul>
<ol start="3">
<li><code>Attacks on the host system</code></li>
</ol>
<ul>
<li>攻击方式：攻击者在线提取若干挑战值对应的 <code>checksum</code>，发起重放攻击</li>
<li>防御：SAGE 的挑战空间很大，不可能发生碰撞</li>
</ul>
<ol start="4">
<li><code>Attacks on the device / Resource takeover</code></li>
</ol>
<ul>
<li>攻击方式：提前占据 GPU，干扰 <code>VF code</code> 的执行</li>
<li>防御：SAGE 占据所有的 GPU 资源，一旦有其他内核占用资源，会导致验证失败。同时将指令设置为强有序模式，只有在特定的指令顺序、特定的初始参数、特定的指令操作下才能得到正确的结果。</li>
</ul>
<ol start="5">
<li><code>Memory copy attacks</code></li>
</ol>
<ul>
<li>攻击方式：</li>
</ul>
<ol start="6">
<li><code>Proxy attacks</code></li>
</ol>
<ul>
<li>攻击方式：攻击者窃听主机侧发送的挑战，使用代理 GPU 运算后返回结果</li>
<li>防御：对于同一机器的代理 GPU，SAGE 按照性能降序建立 RoT；对于网络上的代理 GPU，调整循环次数等参数确保网络延迟超出时间阈值</li>
</ul>
<ol start="7">
<li><code>Time-of-check to time-of-use attacks / Execution environment takeover</code></li>
</ol>
<ul>
<li>攻击方式：攻击者在启动用户内核前和用户内核结束后，趁机占据 GPU</li>
<li>防御：SAGE 保证 <code>VF</code> 验证结束后立马启动用户内核，且当用户内核结束后，仍需运行内核必须重启整个认证过程</li>
</ul>
<ol start="8">
<li><code>Replay attacks</code></li>
</ol>
<p>  - </p>

    </div>
    <footer class="article-footer">
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB/" rel="tag">论文精读</a></li></ul>

    </footer>
  </div>
  
  
    
<nav class="article-nav pt-4 mt-3" id="article-nav">
  
    <a href="/2025/08/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E7%AC%AC%E4%BA%94%E8%AE%B2-%E7%A8%8B%E5%BA%8F%E5%92%8C%E8%BF%9B%E7%A8%8B/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          操作系统-第五讲-程序和进程
        
      </div>
    </a>
  
  
    <a href="/2025/07/01/%E4%BF%9D%E7%A0%94%E8%AE%B0%E5%BD%95/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">保研记录</div>
    </a>
  
</nav>


  
</article>
</div>
    </section>
    <footer class="footer pt-5 mt-5">
  <div class="container">
    <div class="py-3">
      <div class="row justify-content-between">
        <div class="col-6">
          <img class="filter-gray mb-3 lazyload" height="40" data-src="/images/DMX_cat.jpg" alt="Hexo" role="img">
          <p class="mb-4"></p>
          <ul class="list-inline">
            
              <li class="list-inline-item">
                <a target="_blank" rel="noopener" href="https://zhwangart.com">
                  <img 0="微博" src="/images/icons/contact_weibo.svg">
                </a>
              </li>
            
              <li class="list-inline-item">
                <a href="javascript:;">
                  <img 0="微信" src="/images/icons/contact_wechat.svg">
                </a>
              </li>
            
              <li class="list-inline-item">
                <a href="mailto:a@abc.com">
                  <img 0="邮箱" src="/images/icons/contact_email.svg">
                </a>
              </li>
            
          </ul>
        </div>
        <div class="col-4">
          <h5>友情链接</h5>
          <ul class="list-inline">
            
              <li class="list-inline-item">
                <a href="https://acorn.imaging.xin/" title="Acorn" target="_blank" rel="noopener">Acorn</a>
              </li>
            
              <li class="list-inline-item">
                <a href="https://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
              </li>
            
              <li class="list-inline-item">
                <a href="https://github.com/" title="GitHub" target="_blank" rel="noopener">GitHub</a>
              </li>
            
              <li class="list-inline-item">
                <a href="https://duoyu.wang/" title="To Base64" target="_blank" rel="noopener">To Base64</a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
    <hr class="hr" style="opacity: .25;">
    <div class="pt-3 pb-5">
      <ul class="list-inline mb-0 text-center">
        <li class="list-inline-item">&copy; 2025 Hexo</li>
        
        <li class="list-inline-item">Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
        <li class="list-inline-item">Designer <a href="https://acorn.imaging.xin/" target="_blank">DM-X~X~X</a></li>
      </ul>
    </div>
  </div>
</footer>
  </main>
  <div id="mobile-nav-dimmer"></div>
<div id="mobile-nav">
	<div id="mobile-nav-inner">
		<ul class="mobile-nav">
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/">首页</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/stories">故事</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/archives">博客</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/about">关于</a>
  </li>
  
</ul>
		
	</div>
</div>

  <script src="/libs/feather/feather.min.js"></script>
<script src="/libs/lazysizes/lazysizes.min.js"></script>

	<script src="/libs/tocbot/tocbot.min.js"></script>
	<script>
    tocbot.init({
      // Where to render the table of contents.
      tocSelector: '.js-toc',
      // Where to grab the headings to build the table of contents.
      contentSelector: '.js-toc-content',
      // Which headings to grab inside of the contentSelector element.
      headingSelector: 'h2, h3',
      // For headings inside relative or absolute positioned containers within content.
      hasInnerContainers: true,
    });
	</script>





<script src="/js/mobile-nav.js"></script>


<script src="/js/script.js"></script>


</body>
</html>